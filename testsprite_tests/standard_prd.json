{
  "meta": {
    "project": "Raptorflow Authentication System",
    "date": "2026-01-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Raptorflow Authentication System is a secure multi-provider authentication solution integrated within a comprehensive business intelligence platform for ICP management, payment processing, and user onboarding. It ensures seamless user access, role-based control, and security compliance across development and production environments.",
  "core_goals": [
    "Provide secure user authentication with multiple provider support including Supabase Auth and Google OAuth.",
    "Enable role-based access control for admin, standard, and enterprise tiers.",
    "Integrate payment tiers via PhonePe with feature gating and subscription management.",
    "Ensure seamless onboarding experience including cohort and ICP creation.",
    "Maintain robust session security and persistence across devices and tabs.",
    "Comply with security standards including GDPR, CSRF, XSS prevention, and rate limiting."
  ],
  "key_features": [
    "Multi-provider Authentication: Supabase Auth, Google OAuth, Magic Link, local dev accounts for development only.",
    "User Management: Registration, email verification, password reset, account deletion, and role assignments.",
    "Session Management: JWT token handling, session persistence, auto token refresh, logout, and cross-tab synchronization.",
    "Payment Integration: PhonePe payment processing with subscription tiers (Free, Pro, Enterprise), feature gating, trials, and payment failure recovery.",
    "Security Features: CSRF protection, XSS prevention, rate limiting, bcrypt password hashing, and environment-based config.",
    "Development and Production Environment Support: Relaxed security for dev and full security for production.",
    "Role-based Access Control and Admin Management: User roles and admin dashboard functionalities."
  ],
  "user_flow_summary": [
    "New User Registration: Visitor lands on homepage, selects registration, completes email verification, onboarding, and redirected to dashboard.",
    "Existing User Login: User visits login, selects auth method, authenticates, redirected to dashboard with session.",
    "Payment Flow: User selects paid plan, processes payment through PhonePe, updates subscription and unlocks features.",
    "Admin Access: Admin logs in, role verification, accesses admin dashboard for user management and analytics."
  ],
  "validation_criteria": [
    "User registration requires valid email and password security compliance.",
    "Email verification must be completed prior to full access.",
    "OAuth logins must link to existing accounts properly.",
    "Session tokens validated on requests with auto-refresh and logout cleanup.",
    "Free tier limited to 3 ICPs, Pro unlimited, Enterprise with all features and priority support.",
    "Payment failures handled with retries and subscription changes effective immediately.",
    "All auth endpoints use HTTPS and strong password hashing.",
    "CSRF tokens validated and rate limiting prevents brute-force attacks.",
    "Session persistence and multi-tab sync verified.",
    "Security compliance with GDPR, CCPA, SOC 2, PCI DSS, and accessibility standards."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18.3.1",
      "Next.js 14.2.5",
      "TailwindCSS",
      "Supabase",
      "Zustand",
      "Radix UI",
      "Framer Motion",
      "Resend",
      "Vertex AI",
      "Google Cloud Storage",
      "Playwright",
      "Vitest"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Multi-provider authentication with Supabase, Google OAuth, MFA, and session management",
        "files": [
          "src/components/auth/LoginForm.tsx",
          "src/components/auth/OAuthButton.tsx",
          "src/components/auth/AuthGuard.tsx",
          "src/components/auth/ProtectedRoute.tsx",
          "src/components/auth/MFASetup.tsx",
          "src/lib/auth-client.ts",
          "src/lib/auth-server.ts",
          "src/lib/auth-service.ts",
          "src/lib/supabase-auth.ts",
          "src/lib/mfa.ts",
          "src/lib/oauth.ts",
          "src/lib/session-security.ts"
        ]
      },
      {
        "name": "Payment Integration",
        "description": "PhonePe payment processing with subscription tier management and feature gating",
        "files": [
          "src/components/payments/",
          "src/lib/phonepe.ts",
          "src/stores/paymentStore.ts"
        ]
      },
      {
        "name": "ICP Management",
        "description": "Ideal Customer Profile creation, editing, and tier-based limitations",
        "files": [
          "src/lib/icp-store.ts",
          "src/lib/icp-generator.ts",
          "src/components/icp/"
        ]
      },
      {
        "name": "Onboarding System",
        "description": "User onboarding flow with cohort creation and foundation data collection",
        "files": [
          "src/components/onboarding/",
          "src/stores/onboardingStore.ts",
          "src/lib/onboarding-tokens.ts"
        ]
      },
      {
        "name": "Dashboard System",
        "description": "Main dashboard with analytics, user management, and business insights",
        "files": [
          "src/components/Dashboard.tsx",
          "src/components/dashboard/",
          "src/lib/analytics/"
        ]
      },
      {
        "name": "State Management",
        "description": "Zustand stores for application state including campaigns, payments, and settings",
        "files": [
          "src/stores/campaignStore.ts",
          "src/stores/paymentStore.ts",
          "src/stores/settingsStore.ts",
          "src/stores/foundationStore.ts",
          "src/stores/onboardingStore.ts"
        ]
      },
      {
        "name": "Security System",
        "description": "Comprehensive security including GDPR compliance, threat detection, and rate limiting",
        "files": [
          "src/lib/security/",
          "src/lib/gdpr.ts",
          "src/lib/threat-detection.ts",
          "src/lib/rate-limit.ts",
          "src/lib/session-security.ts"
        ]
      },
      {
        "name": "AI Integration",
        "description": "Vertex AI integration for cognitive analysis and content generation",
        "files": [
          "src/lib/vertex-ai.ts",
          "src/lib/ai-config.ts"
        ]
      },
      {
        "name": "Storage System",
        "description": "Google Cloud Storage integration with evidence vault and file management",
        "files": [
          "src/lib/gcp-storage.ts",
          "src/lib/evidence-storage-integration.ts",
          "src/lib/unified-storage.ts"
        ]
      },
      {
        "name": "Email System",
        "description": "Email notifications and communications using Resend",
        "files": [
          "src/lib/email.ts",
          "src/lib/notifications/"
        ]
      }
    ]
  }
}
